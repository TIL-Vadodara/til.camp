{"dependencies":[{"name":"/Volumes/Work/forks/til.camp/.babelrc","includedInParent":true,"mtime":1524300285000},{"name":"/Volumes/Work/forks/til.camp/package.json","includedInParent":true,"mtime":1526468255000},{"name":"/Volumes/Work/forks/til.camp/.browserslistrc","includedInParent":true,"mtime":1524300285000},{"name":"react","loc":{"line":1,"column":33}},{"name":"prop-types","loc":{"line":2,"column":22}},{"name":"../../services/firebase","loc":{"line":3,"column":25}},{"name":"./index.scss","loc":{"line":4,"column":23}},{"name":"../Icons","loc":{"line":5,"column":34}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},t=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,\"value\"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),a=require(\"react\"),l=o(a),n=require(\"prop-types\"),r=o(n),c=require(\"../../services/firebase\"),s=require(\"./index.scss\"),u=o(s),i=require(\"../Icons\");function o(e){return e&&e.__esModule?e:{default:e}}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function p(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function m(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){return e.sort(function(e,t){return e.startTime-t.startTime})},y=function(n){function r(e){f(this,r);var t=p(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state={isLoading:!0,pastEvents:[],places:{},eventTypes:{}},t}return m(r,a.Component),t(r,[{key:\"componentDidMount\",value:function(){var e=this;c.database.ref(\"events\").on(\"child_added\",function(t){var a=[],l=[],n=Object.assign(t.val(),{key:t.key});e.state.places[t.val().place]||(a.push(c.database.ref(\"/places/\"+t.val().place).once(\"value\")),l.push(function(t){e.setState(function(e){return{places:Object.assign(e.places,d({},t.key,t.val()))}})})),e.state.eventTypes[t.val().type]||(a.push(c.database.ref(\"/eventTypes/\"+t.val().type).once(\"value\")),l.push(function(t){e.setState(function(e){return{eventTypes:Object.assign(e.eventTypes,d({},t.key,t.val()))}})})),Promise.all(a).then(function(t){t.forEach(function(e,t){return l[t](e)}),e.setState(function(e){return{isLoading:!1,pastEvents:v(e.pastEvents.concat(n))}})})})}},{key:\"render\",value:function(){var t=this;return l.default.createElement(\"div\",null,l.default.createElement(\"h2\",{className:u.default.pageTitle},\"Past Events\"),l.default.createElement(\"ol\",{className:u.default.eventList},this.state.isLoading?l.default.createElement(\"div\",null,l.default.createElement(h,null),l.default.createElement(h,null)):this.state.pastEvents.map(function(a,n){return l.default.createElement(E,e({key:n},a,{place:t.state.places[a.place],type:t.state.eventTypes[a.type]}))})))}}]),r}(),h=function(){return l.default.createElement(\"div\",{className:u.default.eventListItemPlaceholder},l.default.createElement(\"div\",{className:u.default.dateBoxPlaceholder}),l.default.createElement(\"div\",{className:u.default.textBoxPlaceholder},l.default.createElement(\"div\",{className:u.default.titlePlaceholder}),l.default.createElement(\"div\",{className:u.default.descriptionPlaceholder}),l.default.createElement(\"div\",{className:u.default.detailBoxPlaceholder},l.default.createElement(\"div\",{className:u.default.placeBoxPlaceholder}),l.default.createElement(\"div\",{className:u.default.eventTypeBoxPlaceholder}))))},E=function(e){var t=e.title,a=e.description,n=e.startTime,r=e.place,c=e.type;return l.default.createElement(\"li\",{className:u.default.eventListItem},l.default.createElement(\"div\",{className:u.default.dateBox},l.default.createElement(\"div\",{className:u.default.date},new Date(n).getDate()),l.default.createElement(\"div\",{className:u.default.month},new Date(n).toLocaleString(\"en-in\",{month:\"short\"})),l.default.createElement(\"div\",{className:u.default.year},new Date(n).getFullYear())),l.default.createElement(\"div\",{className:u.default.textBox},l.default.createElement(\"h3\",{className:u.default.title},t),a&&l.default.createElement(\"div\",{className:u.default.description},a),l.default.createElement(\"div\",{className:u.default.detailBox},r&&l.default.createElement(\"div\",{className:u.default.placeBox},l.default.createElement(i.Pin,{className:u.default.pinIcon}),l.default.createElement(\"div\",{className:u.default.place},r.name)),c&&\"Talk\"!=c.name&&l.default.createElement(\"div\",{className:u.default.eventTypeBox},\"Watch and Talk\"==c.name&&l.default.createElement(i.WatchAndTalk,{className:u.default.typeIcon}),l.default.createElement(\"div\",{className:u.default.eventType},c.name)))))};E.propTypes={title:r.default.string,description:r.default.string,startTime:r.default.string,endTime:r.default.string,place:r.default.object,type:r.default.object},exports.default=y;"},"hash":"66ab51ac0ea67fafe026e6cfa0578a40","cacheData":{"env":{}}}