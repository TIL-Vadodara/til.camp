{"dependencies":[{"name":"/Volumes/Work/forks/til.camp/package.json","includedInParent":true,"mtime":1526468255000},{"name":"/Volumes/Work/forks/til.camp/.browserslistrc","includedInParent":true,"mtime":1524300285000},{"name":"/Volumes/Work/forks/til.camp/node_modules/@firebase/database/package.json","includedInParent":true,"mtime":1519337717000},{"name":"tslib","loc":{"line":18,"column":22}},{"name":"./onDisconnect","loc":{"line":19,"column":29}},{"name":"./TransactionResult","loc":{"line":20,"column":34}},{"name":"../core/util/util","loc":{"line":21,"column":21}},{"name":"../core/util/NextPushId","loc":{"line":22,"column":27}},{"name":"./Query","loc":{"line":23,"column":22}},{"name":"../core/Repo","loc":{"line":24,"column":21}},{"name":"../core/util/Path","loc":{"line":25,"column":21}},{"name":"../core/view/QueryParams","loc":{"line":26,"column":28}},{"name":"../core/util/validation","loc":{"line":27,"column":27}},{"name":"@firebase/util","loc":{"line":29,"column":21}},{"name":"../core/SyncPoint","loc":{"line":30,"column":26}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"tslib\"),t=require(\"./onDisconnect\"),r=require(\"./TransactionResult\"),i=require(\"../core/util/util\"),a=require(\"../core/util/NextPushId\"),n=require(\"./Query\"),o=require(\"../core/Repo\"),s=require(\"../core/util/Path\"),c=require(\"../core/view/QueryParams\"),l=require(\"../core/util/validation\"),h=require(\"@firebase/util\"),u=require(\"@firebase/util\"),p=require(\"../core/SyncPoint\"),f=function(n){function p(e,t){if(!(e instanceof o.Repo))throw new Error(\"new Reference() no longer supported - use app.database().\");return n.call(this,e,t,c.QueryParams.DEFAULT,!1)||this}return e.__extends(p,n),p.prototype.getKey=function(){return h.validateArgCount(\"Reference.key\",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},p.prototype.child=function(e){return h.validateArgCount(\"Reference.child\",1,1,arguments.length),\"number\"==typeof e?e=String(e):e instanceof s.Path||(null===this.path.getFront()?l.validateRootPathString(\"Reference.child\",1,e,!1):l.validatePathString(\"Reference.child\",1,e,!1)),new p(this.repo,this.path.child(e))},p.prototype.getParent=function(){h.validateArgCount(\"Reference.parent\",0,0,arguments.length);var e=this.path.parent();return null===e?null:new p(this.repo,e)},p.prototype.getRoot=function(){h.validateArgCount(\"Reference.root\",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},p.prototype.databaseProp=function(){return this.repo.database},p.prototype.set=function(e,t){h.validateArgCount(\"Reference.set\",1,2,arguments.length),l.validateWritablePath(\"Reference.set\",this.path),l.validateFirebaseDataArg(\"Reference.set\",1,e,this.path,!1),h.validateCallback(\"Reference.set\",2,t,!0);var r=new u.Deferred;return this.repo.setWithPriority(this.path,e,null,r.wrapCallback(t)),r.promise},p.prototype.update=function(e,t){if(h.validateArgCount(\"Reference.update\",1,2,arguments.length),l.validateWritablePath(\"Reference.update\",this.path),Array.isArray(e)){for(var r={},a=0;a<e.length;++a)r[\"\"+a]=e[a];e=r,i.warn(\"Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.\")}l.validateFirebaseMergeDataArg(\"Reference.update\",1,e,this.path,!1),h.validateCallback(\"Reference.update\",2,t,!0);var n=new u.Deferred;return this.repo.update(this.path,e,n.wrapCallback(t)),n.promise},p.prototype.setWithPriority=function(e,t,r){if(h.validateArgCount(\"Reference.setWithPriority\",2,3,arguments.length),l.validateWritablePath(\"Reference.setWithPriority\",this.path),l.validateFirebaseDataArg(\"Reference.setWithPriority\",1,e,this.path,!1),l.validatePriority(\"Reference.setWithPriority\",2,t,!1),h.validateCallback(\"Reference.setWithPriority\",3,r,!0),\".length\"===this.getKey()||\".keys\"===this.getKey())throw\"Reference.setWithPriority failed: \"+this.getKey()+\" is a read-only object.\";var i=new u.Deferred;return this.repo.setWithPriority(this.path,e,t,i.wrapCallback(r)),i.promise},p.prototype.remove=function(e){return h.validateArgCount(\"Reference.remove\",0,1,arguments.length),l.validateWritablePath(\"Reference.remove\",this.path),h.validateCallback(\"Reference.remove\",1,e,!0),this.set(null,e)},p.prototype.transaction=function(e,t,i){if(h.validateArgCount(\"Reference.transaction\",1,3,arguments.length),l.validateWritablePath(\"Reference.transaction\",this.path),h.validateCallback(\"Reference.transaction\",1,e,!1),h.validateCallback(\"Reference.transaction\",2,t,!0),l.validateBoolean(\"Reference.transaction\",3,i,!0),\".length\"===this.getKey()||\".keys\"===this.getKey())throw\"Reference.transaction failed: \"+this.getKey()+\" is a read-only object.\";void 0===i&&(i=!0);var a=new u.Deferred;\"function\"==typeof t&&a.promise.catch(function(){});return this.repo.startTransaction(this.path,e,function(e,i,n){e?a.reject(e):a.resolve(new r.TransactionResult(i,n)),\"function\"==typeof t&&t(e,i,n)},i),a.promise},p.prototype.setPriority=function(e,t){h.validateArgCount(\"Reference.setPriority\",1,2,arguments.length),l.validateWritablePath(\"Reference.setPriority\",this.path),l.validatePriority(\"Reference.setPriority\",1,e,!1),h.validateCallback(\"Reference.setPriority\",2,t,!0);var r=new u.Deferred;return this.repo.setWithPriority(this.path.child(\".priority\"),e,null,r.wrapCallback(t)),r.promise},p.prototype.push=function(e,t){h.validateArgCount(\"Reference.push\",0,2,arguments.length),l.validateWritablePath(\"Reference.push\",this.path),l.validateFirebaseDataArg(\"Reference.push\",1,e,this.path,!0),h.validateCallback(\"Reference.push\",2,t,!0);var r,i=this.repo.serverTime(),n=a.nextPushId(i),o=this.child(n),s=this.child(n);return r=null!=e?o.set(e,t).then(function(){return s}):Promise.resolve(s),o.then=r.then.bind(r),o.catch=r.then.bind(r,void 0),\"function\"==typeof t&&r.catch(function(){}),o},p.prototype.onDisconnect=function(){return l.validateWritablePath(\"Reference.onDisconnect\",this.path),new t.OnDisconnect(this.repo,this.path)},Object.defineProperty(p.prototype,\"database\",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,\"key\",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,\"parent\",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,\"root\",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),p}(n.Query);exports.Reference=f,n.Query.__referenceConstructor=f,p.SyncPoint.__referenceConstructor=f;"},"hash":"541fd9b2676b9dc88ff97c7b50d9d649","cacheData":{"env":{}}}