{"dependencies":[{"name":"/Volumes/Work/forks/til.camp/package.json","includedInParent":true,"mtime":1526468255000},{"name":"/Volumes/Work/forks/til.camp/.browserslistrc","includedInParent":true,"mtime":1524300285000},{"name":"/Volumes/Work/forks/til.camp/node_modules/@firebase/database/package.json","includedInParent":true,"mtime":1519337717000},{"name":"./RangedFilter","loc":{"line":18,"column":29}},{"name":"../../snap/ChildrenNode","loc":{"line":19,"column":29}},{"name":"../../snap/Node","loc":{"line":20,"column":21}},{"name":"@firebase/util","loc":{"line":21,"column":21}},{"name":"../Change","loc":{"line":22,"column":23}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"./RangedFilter\"),t=require(\"../../snap/ChildrenNode\"),i=require(\"../../snap/Node\"),r=require(\"@firebase/util\"),d=require(\"../Change\"),n=function(){function n(t){this.rangedFilter_=new e.RangedFilter(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return n.prototype.updateChild=function(e,r,d,n,h,a){return this.rangedFilter_.matches(new i.NamedNode(r,d))||(d=t.ChildrenNode.EMPTY_NODE),e.getImmediateChild(r).equals(d)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,d,n,h,a):this.fullLimitUpdateChild_(e,r,d,h,a)},n.prototype.updateFullNode=function(e,i,r){var d;if(i.isLeafNode()||i.isEmpty())d=t.ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<i.numChildren()&&i.isIndexed(this.index_)){d=t.ChildrenNode.EMPTY_NODE.withIndex(this.index_);var n=void 0;n=this.reverse_?i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var h=0;n.hasNext()&&h<this.limit_;){var a=n.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;d=d.updateImmediateChild(a.name,a.node),h++}}else{d=(d=i.withIndex(this.index_)).updatePriority(t.ChildrenNode.EMPTY_NODE);var l=void 0,s=void 0,o=void 0;n=void 0;if(this.reverse_){n=d.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var g=this.index_.getCompare();o=function(e,t){return g(t,e)}}else n=d.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),o=this.index_.getCompare();h=0;for(var u=!1;n.hasNext();){a=n.getNext();!u&&o(l,a)<=0&&(u=!0),u&&h<this.limit_&&o(a,s)<=0?h++:d=d.updateImmediateChild(a.name,t.ChildrenNode.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,d,r)},n.prototype.updatePriority=function(e,t){return e},n.prototype.filtersNodes=function(){return!0},n.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},n.prototype.getIndex=function(){return this.index_},n.prototype.fullLimitUpdateChild_=function(e,n,h,a,l){var s;if(this.reverse_){var o=this.index_.getCompare();s=function(e,t){return o(t,e)}}else s=this.index_.getCompare();var g=e;r.assert(g.numChildren()==this.limit_,\"\");var u=new i.NamedNode(n,h),_=this.reverse_?g.getFirstChild(this.index_):g.getLastChild(this.index_),m=this.rangedFilter_.matches(u);if(g.hasChild(n)){for(var C=g.getImmediateChild(n),p=a.getChildAfterChild(this.index_,_,this.reverse_);null!=p&&(p.name==n||g.hasChild(p.name));)p=a.getChildAfterChild(this.index_,p,this.reverse_);var x=null==p?1:s(p,u);if(m&&!h.isEmpty()&&x>=0)return null!=l&&l.trackChildChange(d.Change.childChangedChange(n,h,C)),g.updateImmediateChild(n,h);null!=l&&l.trackChildChange(d.Change.childRemovedChange(n,C));var v=g.updateImmediateChild(n,t.ChildrenNode.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=l&&l.trackChildChange(d.Change.childAddedChange(p.name,p.node)),v.updateImmediateChild(p.name,p.node)):v}return h.isEmpty()?e:m&&s(_,u)>=0?(null!=l&&(l.trackChildChange(d.Change.childRemovedChange(_.name,_.node)),l.trackChildChange(d.Change.childAddedChange(n,h))),g.updateImmediateChild(n,h).updateImmediateChild(_.name,t.ChildrenNode.EMPTY_NODE)):e},n}();exports.LimitedFilter=n;"},"hash":"ac6c852cf86d440dff5c10811f26a8b2","cacheData":{"env":{}}}