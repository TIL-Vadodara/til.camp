{"dependencies":[{"name":"/Volumes/Work/forks/til.camp/package.json","includedInParent":true,"mtime":1526468255000},{"name":"/Volumes/Work/forks/til.camp/.browserslistrc","includedInParent":true,"mtime":1524300285000},{"name":"/Volumes/Work/forks/til.camp/node_modules/@firebase/messaging/package.json","includedInParent":true,"mtime":1519337717000},{"name":"tslib","loc":{"line":17,"column":25}},{"name":"./db-interface","loc":{"line":18,"column":24}},{"name":"./errors","loc":{"line":19,"column":19}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"tslib\"),t=a(e),r=require(\"./db-interface\"),o=i(r),n=require(\"./errors\"),c=i(n);function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var u=\"fcm_vapid_object_Store\",s=\"fcm_vapid_details_db\",f=1,l=65,d=function(e){function r(){return e.call(this,s,f)||this}return t.__extends(r,e),r.prototype.onDBUpgrade=function(e){e.createObjectStore(u,{keyPath:\"swScope\"})},r.prototype.getVapidFromSWScope=function(e){return\"string\"!=typeof e||0===e.length?Promise.reject(this.errorFactory_.create(c.default.codes.BAD_SCOPE)):this.openDatabase().then(function(t){return new Promise(function(r,o){var n=t.transaction([u]).objectStore(u).get(e);n.onerror=function(){o(n.error)},n.onsuccess=function(){var e=n.result,t=null;e&&(t=e.vapidKey),r(t)}})})},r.prototype.saveVapidDetails=function(e,t){var r=this;if(\"string\"!=typeof e||0===e.length)return Promise.reject(this.errorFactory_.create(c.default.codes.BAD_SCOPE));if(null===t||t.length!==l)return Promise.reject(this.errorFactory_.create(c.default.codes.BAD_VAPID_KEY));var o={swScope:e,vapidKey:t};return this.openDatabase().then(function(e){return new Promise(function(t,n){var c=e.transaction([u],r.TRANSACTION_READ_WRITE).objectStore(u).put(o);c.onerror=function(){n(c.error)},c.onsuccess=function(){t()}})})},r.prototype.deleteVapidDetails=function(e){var t=this;return this.getVapidFromSWScope(e).then(function(r){if(!r)throw t.errorFactory_.create(c.default.codes.DELETE_SCOPE_NOT_FOUND);return t.openDatabase().then(function(o){return new Promise(function(n,i){var a=o.transaction([u],t.TRANSACTION_READ_WRITE).objectStore(u).delete(e);a.onerror=function(){i(a.error)},a.onsuccess=function(){0!==a.result?n(r):i(t.errorFactory_.create(c.default.codes.FAILED_DELETE_VAPID_KEY))}})})})},r}(o.default);exports.default=d;"},"hash":"a580580cc5d4cd18768e4960e2c88896","cacheData":{"env":{}}}