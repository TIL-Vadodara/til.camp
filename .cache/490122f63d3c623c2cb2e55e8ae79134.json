{"dependencies":[{"name":"/Volumes/Work/forks/til.camp/package.json","includedInParent":true,"mtime":1526468255000},{"name":"/Volumes/Work/forks/til.camp/.browserslistrc","includedInParent":true,"mtime":1524300285000},{"name":"/Volumes/Work/forks/til.camp/node_modules/@firebase/database/package.json","includedInParent":true,"mtime":1519337717000},{"name":"tslib","loc":{"line":18,"column":22}},{"name":"@firebase/util","loc":{"line":19,"column":21}},{"name":"../util/util","loc":{"line":20,"column":21}},{"name":"../util/SortedMap","loc":{"line":21,"column":26}},{"name":"./Node","loc":{"line":22,"column":21}},{"name":"./snap","loc":{"line":23,"column":21}},{"name":"./indexes/PriorityIndex","loc":{"line":24,"column":30}},{"name":"./indexes/KeyIndex","loc":{"line":25,"column":25}},{"name":"./IndexMap","loc":{"line":26,"column":25}},{"name":"./LeafNode","loc":{"line":27,"column":25}},{"name":"./comparators","loc":{"line":28,"column":28}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e,t=require(\"tslib\"),r=require(\"@firebase/util\"),i=require(\"../util/util\"),n=require(\"../util/SortedMap\"),o=require(\"./Node\"),s=require(\"./snap\"),a=require(\"./indexes/PriorityIndex\"),d=require(\"./indexes/KeyIndex\"),u=require(\"./IndexMap\"),h=require(\"./LeafNode\"),p=require(\"./comparators\"),l=function(){function t(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&s.validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&r.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),\"An empty node cannot have a priority\")}return Object.defineProperty(t,\"EMPTY_NODE\",{get:function(){return e||(e=new t(new n.SortedMap(p.NAME_COMPARATOR),null,u.IndexMap.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||e},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(\".priority\"===t)return this.getPriority();var r=this.children_.get(t);return null===r?e:r},t.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},t.prototype.hasChild=function(e){return null!==this.children_.get(e)},t.prototype.updateImmediateChild=function(i,n){if(r.assert(n,\"We should always be passing snapshot nodes\"),\".priority\"===i)return this.updatePriority(n);var s=new o.NamedNode(i,n),a=void 0,d=void 0;return n.isEmpty()?(a=this.children_.remove(i),d=this.indexMap_.removeFromIndexes(s,this.children_)):(a=this.children_.insert(i,n),d=this.indexMap_.addToIndexes(s,this.children_)),new t(a,a.isEmpty()?e:this.priorityNode_,d)},t.prototype.updateChild=function(e,t){var i=e.getFront();if(null===i)return t;r.assert(\".priority\"!==e.getFront()||1===e.getLength(),\".priority must be the last token in a path\");var n=this.getImmediateChild(i).updateChild(e.popFront(),t);return this.updateImmediateChild(i,n)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var r={},i=0,n=0,o=!0;if(this.forEachChild(a.PRIORITY_INDEX,function(s,a){r[s]=a.val(e),i++,o&&t.INTEGER_REGEXP_.test(s)?n=Math.max(n,Number(s)):o=!1}),!e&&o&&n<2*i){var s=[];for(var d in r)s[d]=r[d];return s}return e&&!this.getPriority().isEmpty()&&(r[\".priority\"]=this.getPriority().val()),r},t.prototype.hash=function(){if(null===this.lazyHash_){var e=\"\";this.getPriority().isEmpty()||(e+=\"priority:\"+s.priorityHashText(this.getPriority().val())+\":\"),this.forEachChild(a.PRIORITY_INDEX,function(t,r){var i=r.hash();\"\"!==i&&(e+=\":\"+t+\":\"+i)}),this.lazyHash_=\"\"===e?\"\":i.sha1(e)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(e,t,r){var i=this.resolveIndex_(r);if(i){var n=i.getPredecessorKey(new o.NamedNode(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)},t.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var r=t.minKey();return r&&r.name}return this.children_.minKey()},t.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new o.NamedNode(t,this.children_.get(t)):null},t.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var r=t.maxKey();return r&&r.name}return this.children_.maxKey()},t.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new o.NamedNode(t,this.children_.get(t)):null},t.prototype.forEachChild=function(e,t){var r=this.resolveIndex_(e);return r?r.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},t.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},t.prototype.getIteratorFrom=function(e,t){var r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,function(e){return e});for(var i=this.children_.getIteratorFrom(e.name,o.NamedNode.Wrap),n=i.peek();null!=n&&t.compare(n,e)<0;)i.getNext(),n=i.peek();return i},t.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},t.prototype.getReverseIteratorFrom=function(e,t){var r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,function(e){return e});for(var i=this.children_.getReverseIteratorFrom(e.name,o.NamedNode.Wrap),n=i.peek();null!=n&&t.compare(n,e)>0;)i.getNext(),n=i.peek();return i},t.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===exports.MAX_NODE?-1:0},t.prototype.withIndex=function(e){if(e===d.KEY_INDEX||this.indexMap_.hasIndex(e))return this;var r=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,r)},t.prototype.isIndexed=function(e){return e===d.KEY_INDEX||this.indexMap_.hasIndex(e)},t.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var r=this.getIterator(a.PRIORITY_INDEX),i=t.getIterator(a.PRIORITY_INDEX),n=r.getNext(),o=i.getNext();n&&o;){if(n.name!==o.name||!n.node.equals(o.node))return!1;n=r.getNext(),o=i.getNext()}return null===n&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(e){return e===d.KEY_INDEX?null:this.indexMap_.get(e.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\\d*)$/,t}();exports.ChildrenNode=l;var y=function(e){function r(){return e.call(this,new n.SortedMap(p.NAME_COMPARATOR),l.EMPTY_NODE,u.IndexMap.Default)||this}return t.__extends(r,e),r.prototype.compareTo=function(e){return e===this?0:1},r.prototype.equals=function(e){return e===this},r.prototype.getPriority=function(){return this},r.prototype.getImmediateChild=function(e){return l.EMPTY_NODE},r.prototype.isEmpty=function(){return!1},r}(l);exports.MaxNode=y,exports.MAX_NODE=new y,Object.defineProperties(o.NamedNode,{MIN:{value:new o.NamedNode(i.MIN_NAME,l.EMPTY_NODE)},MAX:{value:new o.NamedNode(i.MAX_NAME,exports.MAX_NODE)}}),d.KeyIndex.__EMPTY_NODE=l.EMPTY_NODE,h.LeafNode.__childrenNodeConstructor=l,s.setMaxNode(exports.MAX_NODE),a.setMaxNode(exports.MAX_NODE);"},"hash":"c63a3fa255cf9c9a600d72adc8c96898","cacheData":{"env":{}}}