{"dependencies":[{"name":"/Volumes/Work/forks/til.camp/package.json","includedInParent":true,"mtime":1526468255000},{"name":"/Volumes/Work/forks/til.camp/.browserslistrc","includedInParent":true,"mtime":1524300285000},{"name":"/Volumes/Work/forks/til.camp/node_modules/@firebase/database/package.json","includedInParent":true,"mtime":1519337717000},{"name":"./util/ImmutableTree","loc":{"line":18,"column":30}},{"name":"./util/Path","loc":{"line":19,"column":21}},{"name":"@firebase/util","loc":{"line":23,"column":21}},{"name":"./snap/Node","loc":{"line":21,"column":21}},{"name":"./snap/indexes/PriorityIndex","loc":{"line":22,"column":30}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"./util/ImmutableTree\"),t=require(\"./util/Path\"),r=require(\"@firebase/util\"),i=require(\"./snap/Node\"),n=require(\"./snap/indexes/PriorityIndex\"),u=require(\"@firebase/util\"),l=function(){function l(e){this.writeTree_=e}return l.prototype.addWrite=function(r,i){if(r.isEmpty())return new l(new e.ImmutableTree(i));var n=this.writeTree_.findRootMostValueAndPath(r);if(null!=n){var u=n.path,o=n.value,a=t.Path.relativePath(u,r);return o=o.updateChild(a,i),new l(this.writeTree_.set(u,o))}var p=new e.ImmutableTree(i);return new l(this.writeTree_.setTree(r,p))},l.prototype.addWrites=function(e,t){var i=this;return r.forEach(t,function(t,r){i=i.addWrite(e.child(t),r)}),i},l.prototype.removeWrite=function(t){return t.isEmpty()?l.Empty:new l(this.writeTree_.setTree(t,e.ImmutableTree.Empty))},l.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},l.prototype.getCompleteNode=function(e){var r=this.writeTree_.findRootMostValueAndPath(e);return null!=r?this.writeTree_.get(r.path).getChild(t.Path.relativePath(r.path,e)):null},l.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(n.PRIORITY_INDEX,function(t,r){e.push(new i.NamedNode(t,r))}):this.writeTree_.children.inorderTraversal(function(t,r){null!=r.value&&e.push(new i.NamedNode(t,r.value))}),e},l.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var r=this.getCompleteNode(t);return new l(null!=r?new e.ImmutableTree(r):this.writeTree_.subtree(t))},l.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},l.prototype.apply=function(e){return l.applySubtreeWrite_(t.Path.Empty,this.writeTree_,e)},l.Empty=new l(new e.ImmutableTree(null)),l.applySubtreeWrite_=function(e,t,r){if(null!=t.value)return r.updateChild(e,t.value);var i=null;return t.children.inorderTraversal(function(t,n){\".priority\"===t?(u.assert(null!==n.value,\"Priority writes must always be leaf nodes\"),i=n.value):r=l.applySubtreeWrite_(e.child(t),n,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(\".priority\"),i)),r},l}();exports.CompoundWrite=l;"},"hash":"e4ee15f1784e31f1fdc048f38d159075","cacheData":{"env":{}}}