{"dependencies":[{"name":"/Volumes/Work/forks/til.camp/package.json","includedInParent":true,"mtime":1526468255000},{"name":"/Volumes/Work/forks/til.camp/.browserslistrc","includedInParent":true,"mtime":1524300285000},{"name":"/Volumes/Work/forks/til.camp/node_modules/@firebase/database/package.json","includedInParent":true,"mtime":1519337717000},{"name":"../snap/Node","loc":{"line":18,"column":21}},{"name":"./Change","loc":{"line":19,"column":23}},{"name":"@firebase/util","loc":{"line":20,"column":21}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"../snap/Node\"),n=require(\"./Change\"),t=require(\"@firebase/util\"),r=function(){function r(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return r.prototype.generateEventsForChanges=function(e,t,r){var a=this,o=[],i=[];return e.forEach(function(e){e.type===n.Change.CHILD_CHANGED&&a.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&i.push(n.Change.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(o,n.Change.CHILD_REMOVED,e,r,t),this.generateEventsForType_(o,n.Change.CHILD_ADDED,e,r,t),this.generateEventsForType_(o,n.Change.CHILD_MOVED,i,r,t),this.generateEventsForType_(o,n.Change.CHILD_CHANGED,e,r,t),this.generateEventsForType_(o,n.Change.VALUE,e,r,t),o},r.prototype.generateEventsForType_=function(e,n,t,r,a){var o=this,i=t.filter(function(e){return e.type===n});i.sort(this.compareChanges_.bind(this)),i.forEach(function(n){var t=o.materializeSingleChange_(n,a);r.forEach(function(r){r.respondsTo(n.type)&&e.push(r.createEvent(t,o.query_))})})},r.prototype.materializeSingleChange_=function(e,n){return\"value\"===e.type||\"child_removed\"===e.type?e:(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},r.prototype.compareChanges_=function(n,r){if(null==n.childName||null==r.childName)throw t.assertionError(\"Should only compare child_ events.\");var a=new e.NamedNode(n.childName,n.snapshotNode),o=new e.NamedNode(r.childName,r.snapshotNode);return this.index_.compare(a,o)},r}();exports.EventGenerator=r;"},"hash":"acc97524f10445f91a5c85074cfe961b","cacheData":{"env":{}}}