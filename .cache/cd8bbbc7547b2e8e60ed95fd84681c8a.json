{"dependencies":[{"name":"/Volumes/Work/forks/til.camp/package.json","includedInParent":true,"mtime":1526468255000},{"name":"/Volumes/Work/forks/til.camp/.browserslistrc","includedInParent":true,"mtime":1524300285000},{"name":"/Volumes/Work/forks/til.camp/node_modules/@firebase/database/package.json","includedInParent":true,"mtime":1519337717000},{"name":"@firebase/util","loc":{"line":28,"column":21}},{"name":"../core/snap/indexes/KeyIndex","loc":{"line":19,"column":25}},{"name":"../core/snap/indexes/PriorityIndex","loc":{"line":20,"column":30}},{"name":"../core/snap/indexes/ValueIndex","loc":{"line":21,"column":27}},{"name":"../core/snap/indexes/PathIndex","loc":{"line":22,"column":26}},{"name":"../core/util/util","loc":{"line":23,"column":21}},{"name":"../core/util/Path","loc":{"line":24,"column":21}},{"name":"../core/util/validation","loc":{"line":25,"column":27}},{"name":"../core/view/EventRegistration","loc":{"line":27,"column":34}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e,t=require(\"@firebase/util\"),r=require(\"../core/snap/indexes/KeyIndex\"),i=require(\"../core/snap/indexes/PriorityIndex\"),a=require(\"../core/snap/indexes/ValueIndex\"),n=require(\"../core/snap/indexes/PathIndex\"),o=require(\"../core/util/util\"),l=require(\"../core/util/Path\"),u=require(\"../core/util/validation\"),s=require(\"@firebase/util\"),y=require(\"../core/view/EventRegistration\"),d=require(\"@firebase/util\"),h=function(){function h(e,t,r,i){this.repo=e,this.path=t,this.queryParams_=r,this.orderByCalled_=i}return Object.defineProperty(h,\"__referenceConstructor\",{get:function(){return t.assert(e,\"Reference.ts has not been loaded\"),e},set:function(t){e=t},enumerable:!0,configurable:!0}),h.validateQueryEndpoints_=function(e){var l=null,s=null;if(e.hasStart()&&(l=e.getIndexStartValue()),e.hasEnd()&&(s=e.getIndexEndValue()),e.getIndex()===r.KEY_INDEX){var y=\"Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().\",d=\"Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.\";if(e.hasStart()){if(e.getIndexStartName()!=o.MIN_NAME)throw new Error(y);if(\"string\"!=typeof l)throw new Error(d)}if(e.hasEnd()){if(e.getIndexEndName()!=o.MAX_NAME)throw new Error(y);if(\"string\"!=typeof s)throw new Error(d)}}else if(e.getIndex()===i.PRIORITY_INDEX){if(null!=l&&!u.isValidPriority(l)||null!=s&&!u.isValidPriority(s))throw new Error(\"Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).\")}else if(t.assert(e.getIndex()instanceof n.PathIndex||e.getIndex()===a.VALUE_INDEX,\"unknown index type.\"),null!=l&&\"object\"==typeof l||null!=s&&\"object\"==typeof s)throw new Error(\"Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.\")},h.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error(\"Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.\")},h.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+\": You can't combine multiple orderBy calls.\")},h.prototype.getQueryParams=function(){return this.queryParams_},h.prototype.getRef=function(){return s.validateArgCount(\"Query.ref\",0,0,arguments.length),new h.__referenceConstructor(this.repo,this.path)},h.prototype.on=function(e,t,r,i){s.validateArgCount(\"Query.on\",2,4,arguments.length),u.validateEventType(\"Query.on\",1,e,!1),s.validateCallback(\"Query.on\",2,t,!1);var a=h.getCancelAndContextArgs_(\"Query.on\",r,i);if(\"value\"===e)this.onValueEvent(t,a.cancel,a.context);else{var n={};n[e]=t,this.onChildEvent(n,a.cancel,a.context)}return t},h.prototype.onValueEvent=function(e,t,r){var i=new y.ValueEventRegistration(e,t||null,r||null);this.repo.addEventCallbackForQuery(this,i)},h.prototype.onChildEvent=function(e,t,r){var i=new y.ChildEventRegistration(e,t,r);this.repo.addEventCallbackForQuery(this,i)},h.prototype.off=function(e,t,r){s.validateArgCount(\"Query.off\",0,3,arguments.length),u.validateEventType(\"Query.off\",1,e,!0),s.validateCallback(\"Query.off\",2,t,!0),s.validateContextObject(\"Query.off\",3,r,!0);var i=null,a=null;if(\"value\"===e){var n=t||null;i=new y.ValueEventRegistration(n,null,r||null)}else e&&(t&&((a={})[e]=t),i=new y.ChildEventRegistration(a,null,r||null));this.repo.removeEventCallbackForQuery(this,i)},h.prototype.once=function(e,t,r,i){var a=this;s.validateArgCount(\"Query.once\",1,4,arguments.length),u.validateEventType(\"Query.once\",1,e,!1),s.validateCallback(\"Query.once\",2,t,!0);var n=h.getCancelAndContextArgs_(\"Query.once\",r,i),o=!0,l=new d.Deferred;l.promise.catch(function(){});var y=function(r){o&&(o=!1,a.off(e,y),t&&t.bind(n.context)(r),l.resolve(r))};return this.on(e,y,function(t){a.off(e,y),n.cancel&&n.cancel.bind(n.context)(t),l.reject(t)}),l.promise},h.prototype.limitToFirst=function(e){if(s.validateArgCount(\"Query.limitToFirst\",1,1,arguments.length),\"number\"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error(\"Query.limitToFirst: First argument must be a positive integer.\");if(this.queryParams_.hasLimit())throw new Error(\"Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");return new h(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},h.prototype.limitToLast=function(e){if(s.validateArgCount(\"Query.limitToLast\",1,1,arguments.length),\"number\"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error(\"Query.limitToLast: First argument must be a positive integer.\");if(this.queryParams_.hasLimit())throw new Error(\"Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");return new h(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},h.prototype.orderByChild=function(e){if(s.validateArgCount(\"Query.orderByChild\",1,1,arguments.length),\"$key\"===e)throw new Error('Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.');if(\"$priority\"===e)throw new Error('Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.');if(\"$value\"===e)throw new Error('Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.');u.validatePathString(\"Query.orderByChild\",1,e,!1),this.validateNoPreviousOrderByCall_(\"Query.orderByChild\");var t=new l.Path(e);if(t.isEmpty())throw new Error(\"Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.\");var r=new n.PathIndex(t),i=this.queryParams_.orderBy(r);return h.validateQueryEndpoints_(i),new h(this.repo,this.path,i,!0)},h.prototype.orderByKey=function(){s.validateArgCount(\"Query.orderByKey\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByKey\");var e=this.queryParams_.orderBy(r.KEY_INDEX);return h.validateQueryEndpoints_(e),new h(this.repo,this.path,e,!0)},h.prototype.orderByPriority=function(){s.validateArgCount(\"Query.orderByPriority\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByPriority\");var e=this.queryParams_.orderBy(i.PRIORITY_INDEX);return h.validateQueryEndpoints_(e),new h(this.repo,this.path,e,!0)},h.prototype.orderByValue=function(){s.validateArgCount(\"Query.orderByValue\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByValue\");var e=this.queryParams_.orderBy(a.VALUE_INDEX);return h.validateQueryEndpoints_(e),new h(this.repo,this.path,e,!0)},h.prototype.startAt=function(e,t){void 0===e&&(e=null),s.validateArgCount(\"Query.startAt\",0,2,arguments.length),u.validateFirebaseDataArg(\"Query.startAt\",1,e,this.path,!0),u.validateKey(\"Query.startAt\",2,t,!0);var r=this.queryParams_.startAt(e,t);if(h.validateLimit_(r),h.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error(\"Query.startAt: Starting point was already set (by another call to startAt or equalTo).\");return void 0===e&&(e=null,t=null),new h(this.repo,this.path,r,this.orderByCalled_)},h.prototype.endAt=function(e,t){void 0===e&&(e=null),s.validateArgCount(\"Query.endAt\",0,2,arguments.length),u.validateFirebaseDataArg(\"Query.endAt\",1,e,this.path,!0),u.validateKey(\"Query.endAt\",2,t,!0);var r=this.queryParams_.endAt(e,t);if(h.validateLimit_(r),h.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error(\"Query.endAt: Ending point was already set (by another call to endAt or equalTo).\");return new h(this.repo,this.path,r,this.orderByCalled_)},h.prototype.equalTo=function(e,t){if(s.validateArgCount(\"Query.equalTo\",1,2,arguments.length),u.validateFirebaseDataArg(\"Query.equalTo\",1,e,this.path,!1),u.validateKey(\"Query.equalTo\",2,t,!0),this.queryParams_.hasStart())throw new Error(\"Query.equalTo: Starting point was already set (by another call to startAt or equalTo).\");if(this.queryParams_.hasEnd())throw new Error(\"Query.equalTo: Ending point was already set (by another call to endAt or equalTo).\");return this.startAt(e,t).endAt(e,t)},h.prototype.toString=function(){return s.validateArgCount(\"Query.toString\",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},h.prototype.toJSON=function(){return s.validateArgCount(\"Query.toJSON\",0,1,arguments.length),this.toString()},h.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},h.prototype.queryIdentifier=function(){var e=this.queryObject(),t=o.ObjectToUniqueKey(e);return\"{}\"===t?\"default\":t},h.prototype.isEqual=function(e){if(s.validateArgCount(\"Query.isEqual\",1,1,arguments.length),!(e instanceof h)){throw new Error(\"Query.isEqual failed: First argument must be an instance of firebase.database.Query.\")}var t=this.repo===e.repo,r=this.path.equals(e.path),i=this.queryIdentifier()===e.queryIdentifier();return t&&r&&i},h.getCancelAndContextArgs_=function(e,t,r){var i={cancel:null,context:null};if(t&&r)i.cancel=t,s.validateCallback(e,3,i.cancel,!0),i.context=r,s.validateContextObject(e,4,i.context,!0);else if(t)if(\"object\"==typeof t&&null!==t)i.context=t;else{if(\"function\"!=typeof t)throw new Error(s.errorPrefix(e,3,!0)+\" must either be a cancel callback or a context object.\");i.cancel=t}return i},Object.defineProperty(h.prototype,\"ref\",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),h}();exports.Query=h;"},"hash":"9b07aef75e6409e0e3aab7baa6f8eb76","cacheData":{"env":{}}}